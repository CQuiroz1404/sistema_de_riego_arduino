<div class="container mx-auto px-4 py-4 md:py-8 max-w-6xl"> <!-- Header --> <div class="mb-6 md:mb-8"> <h1 class="text-2xl md:text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-2 md:gap-3"> <i class="fas fa-user-circle text-green-500 text-xl md:text-2xl"></i> Mi Perfil </h1> <p class="text-sm md:text-base text-gray-600 dark:text-gray-400 mt-1 md:mt-2">Gestiona tu información personal y configuración de cuenta</p> </div> <div class="grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6"> <!-- Sidebar --> <div class="lg:col-span-1"> <!-- Profile Card --> <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 md:p-6 border border-gray-100 dark:border-gray-700 text-center"> <!-- Avatar con opciones --> <div class="relative inline-block mb-3 md:mb-4 group"> <div class="w-20 h-20 md:w-24 md:h-24 rounded-full overflow-hidden shadow-lg border-4 border-white dark:border-gray-700"> {{#if user.avatar}} <img id="avatarImage" src="{{user.avatar}}" alt="Avatar" class="w-full h-full object-cover"> {{else}} <div id="avatarPlaceholder" class="w-full h-full bg-gradient-to-br from-green-400 to-green-600 flex items-center justify-center"> <i class="fas fa-user text-3xl md:text-4xl text-white"></i> </div> {{/if}} </div> <!-- Overlay con opciones (aparece al hacer hover) --> <div class="absolute inset-0 bg-black bg-opacity-50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center gap-2"> <label for="avatarInput" class="bg-green-500 hover:bg-green-600 text-white rounded-full w-10 h-10 flex items-center justify-center cursor-pointer shadow-lg transition-colors" title="Cambiar foto"> <i class="fas fa-camera text-sm"></i> </label> {{#if user.avatar}} <button id="deleteAvatarBtn" class="bg-red-500 hover:bg-red-600 text-white rounded-full w-10 h-10 flex items-center justify-center shadow-lg transition-colors" title="Eliminar foto"> <i class="fas fa-trash-alt text-sm"></i> </button> {{/if}} </div> <input type="file" id="avatarInput" accept="image/*" class="hidden"> </div> <h2 class="text-lg md:text-xl font-bold text-gray-900 dark:text-white break-words">{{user.nombre}}</h2> <p class="text-gray-500 dark:text-gray-400 text-xs md:text-sm mt-1 break-all">{{user.email}}</p> <div class="mt-3 md:mt-4 inline-flex items-center px-2.5 md:px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400"> <i class="fas fa-shield-alt mr-1 text-xs"></i> {{user.rol}} </div> </div> <!-- Stats Card --> <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 md:p-6 border border-gray-100 dark:border-gray-700 mt-4 md:mt-6"> <h3 class="text-base md:text-lg font-bold text-gray-900 dark:text-white mb-3 md:mb-4 flex items-center gap-2"> <i class="fas fa-chart-bar text-blue-500 text-sm md:text-base"></i> Estadísticas </h3> <div class="space-y-3 md:space-y-4"> <div class="flex justify-between items-center"> <span class="text-gray-600 dark:text-gray-400 text-xs md:text-sm flex items-center gap-2"> <i class="fas fa-microchip w-4 md:w-5 text-center text-xs md:text-sm"></i> Dispositivos </span> <span class="text-lg md:text-xl font-bold text-gray-900 dark:text-white">{{stats.total_dispositivos}}</span> </div> <div class="flex justify-between items-center"> <span class="text-gray-600 dark:text-gray-400 text-xs md:text-sm flex items-center gap-2"> <i class="fas fa-thermometer-half w-4 md:w-5 text-center text-xs md:text-sm"></i> Sensores </span> <span class="text-lg md:text-xl font-bold text-gray-900 dark:text-white">{{stats.total_sensores}}</span> </div> <div class="flex justify-between items-center"> <span class="text-gray-600 dark:text-gray-400 text-xs md:text-sm flex items-center gap-2"> <i class="fas fa-database w-4 md:w-5 text-center text-xs md:text-sm"></i> Lecturas </span> <span class="text-lg md:text-xl font-bold text-gray-900 dark:text-white">{{stats.total_lecturas}}</span> </div> <div class="pt-3 md:pt-4 border-t border-gray-200 dark:border-gray-700"> <span class="text-gray-600 dark:text-gray-400 text-xs flex items-center gap-2"> <i class="fas fa-calendar-alt text-xs"></i> Miembro desde </span> <span class="text-xs md:text-sm font-medium text-gray-900 dark:text-white mt-1 block">{{formatDate stats.fecha_registro}}</span> </div> </div> </div> </div> <!-- Main Content --> <div class="lg:col-span-2 space-y-4 md:space-y-6"> <!-- Edit Profile --> <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 md:p-6 border border-gray-100 dark:border-gray-700"> <h3 class="text-base md:text-lg font-bold text-gray-900 dark:text-white mb-3 md:mb-4 flex items-center gap-2"> <i class="fas fa-user-edit text-green-500 text-sm md:text-base"></i> Información Personal </h3> <form id="profileForm" class="space-y-3 md:space-y-4"> <div> <label for="nombre" class="block text-xs md:text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"> Nombre completo </label> <input type="text" id="nombre" name="nombre" value="{{user.nombre}}" required class="w-full rounded-lg border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-green-500 focus:ring-green-500 text-sm md:text-base py-2 px-3"> </div> <div id="profileMessage" class="hidden"></div> <div class="flex flex-col sm:flex-row gap-2 md:gap-3 pt-2"> <button type="submit" class="w-full sm:w-auto bg-green-600 hover:bg-green-700 text-white px-4 md:px-6 py-2 md:py-2.5 rounded-lg text-xs md:text-sm font-medium transition-colors shadow-sm flex items-center justify-center gap-2"> <i class="fas fa-save text-xs md:text-sm"></i> Guardar Cambios </button> <a href="/dashboard" class="w-full sm:w-auto bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-600 px-4 md:px-6 py-2 md:py-2.5 rounded-lg text-xs md:text-sm font-medium transition-colors shadow-sm flex items-center justify-center gap-2"> <i class="fas fa-times text-xs md:text-sm"></i> Cancelar </a> </div> </form> </div> <!-- Change Password --> <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 md:p-6 border border-gray-100 dark:border-gray-700"> <h3 class="text-base md:text-lg font-bold text-gray-900 dark:text-white mb-3 md:mb-4 flex items-center gap-2"> <i class="fas fa-lock text-yellow-500 text-sm md:text-base"></i> Cambiar Contraseña </h3> <form id="passwordForm" class="space-y-3 md:space-y-4"> <div> <label for="currentPassword" class="block text-xs md:text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"> Contraseña actual </label> <input type="password" id="currentPassword" name="currentPassword" required class="w-full rounded-lg border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-green-500 focus:ring-green-500 text-sm md:text-base py-2 px-3"> </div> <div> <label for="newPassword" class="block text-xs md:text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"> Nueva contraseña </label> <input type="password" id="newPassword" name="newPassword" required minlength="6" class="w-full rounded-lg border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-green-500 focus:ring-green-500 text-sm md:text-base py-2 px-3"> <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">Mínimo 6 caracteres</p> </div> <div> <label for="confirmPassword" class="block text-xs md:text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"> Confirmar contraseña </label> <input type="password" id="confirmPassword" name="confirmPassword" required minlength="6" class="w-full rounded-lg border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-green-500 focus:ring-green-500 text-sm md:text-base py-2 px-3"> </div> <div id="passwordMessage" class="hidden"></div> <button type="submit" class="w-full sm:w-auto bg-yellow-500 hover:bg-yellow-600 text-white px-4 md:px-6 py-2 md:py-2.5 rounded-lg text-xs md:text-sm font-medium transition-colors shadow-sm flex items-center justify-center gap-2"> <i class="fas fa-key text-xs md:text-sm"></i> Actualizar Contraseña </button> </form> </div> <!-- Account Info --> <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-3 md:p-4"> <div class="flex items-start gap-2 md:gap-3"> <i class="fas fa-info-circle text-blue-500 mt-0.5 md:mt-1 text-sm md:text-base"></i> <div class="text-xs md:text-sm text-blue-800 dark:text-blue-300"> <p class="font-medium mb-1">Información de seguridad</p> <p>Tu información está protegida y encriptada. Nunca compartas tu contraseña con nadie.</p> </div> </div> </div> </div> </div> </div>

{{{scripts}}}
